{% extends "base.html" %}
{% block title %}Exercise â€” Verb-End Torture Chamber{% endblock %}

{% block content %}
<div class="exercise-container">
    <div class="exercise-header">
        <span class="difficulty-badge">{{ difficulty_label }}</span>
        <span id="clause-type" class="clause-badge"></span>
    </div>

    <div class="instruction">
        <p>Put all the words in the correct order to form the sentence.</p>
        <p class="instruction-hint">Tap a word to place it in the next slot, or drag it to a specific position. Hold a word to see its Duden definition.</p>
    </div>

    <div id="sentence-area" class="sentence-area">
        <!-- Slots rendered by JS -->
    </div>

    <div id="word-pool" class="word-pool">
        <div class="word-pool-label">W&ouml;rter:</div>
        <div id="word-tray" class="word-tray">
            <!-- Draggable words rendered by JS -->
        </div>
    </div>

    <div class="action-bar">
        <button id="btn-check" class="btn btn-primary" disabled>Pr&uuml;fen</button>
        <button id="btn-reset" class="btn btn-secondary">Reset</button>
    </div>

    <div id="result-area" class="result-area hidden">
        <div id="result-icon" class="result-icon"></div>
        <div id="result-message" class="result-message"></div>
        <div id="correct-sentence" class="correct-sentence"></div>
        <div id="explanation-box" class="explanation-box"></div>
        <div id="error-details" class="error-details"></div>
        <div class="action-bar">
            <a href="/exercise?difficulty={{ difficulty_label|replace('A2','1')|replace('B1','2')|replace('B2','3')|replace('C1','4') }}" class="btn btn-primary">Next Exercise</a>
            <a href="/" class="btn btn-secondary">Home</a>
        </div>
    </div>
</div>

<script>
    const EXERCISE_DATA = {{ exercise|safe }};
    const RETRY_ID = {{ retry_id|tojson }};
</script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
